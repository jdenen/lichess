* Lichess

Code and literate documentation for tracking Lichess progress (or lack thereof).

#+NAME: summary
#+CALL: recap(user="beardedjohnson")

#+RESULTS: summary
#+begin_src txt
+===========================+
|  Recap of Last 100 Games  |
+===========================+
| 50 BLACK games (33 wins)  |
| 50 WHITE games (28 wins)  |
+---------------------------+
| 23 RATED games (12 wins)  |
| 77 CASUAL games (49 wins) |
+---------------------------+
| 16 BLITZ games (9 wins)   |
| 75 RAPID games (48 wins)  |
+===========================+

#+end_src

#+NAME: blitz
#+CALL: chart(variant="blitz", user="beardedjohnson")

#+RESULTS: blitz
#+begin_src sh
1040.00 ┤
1035.13 ┼╮
1030.27 ┤│
1025.40 ┤│
1020.53 ┤│
1015.67 ┤│
1010.80 ┤│
1005.93 ┤│
1001.07 ┤│
 996.20 ┤│
 991.33 ┤│
 986.47 ┤│
 981.60 ┤│
 976.73 ┤│
 971.87 ┤│
 967.00 ┤╰

#+end_src

#+NAME: rapid
#+CALL: chart(variant="rapid", user="beardedjohnson")

#+RESULTS: rapid
#+begin_src sh
1268.00 ┤
1262.27 ┤      ╭╮
1256.53 ┤      ││
1250.80 ┤      ││
1245.07 ┤╭╮    │╰
1239.33 ┤││   ╭╯
1233.60 ┤││   │
1227.87 ┤││   │
1222.13 ┤││   │
1216.40 ┤│╰╮╭─╯
1210.67 ┤│ ││
1204.93 ┤│ ││
1199.20 ┤│ ││
1193.47 ┤│ ╰╯
1187.73 ┤│
1182.00 ┼╯

#+end_src

#+NAME: puzzles
#+CALL: chart(variant="puzzles", user="beardedjohnson")

#+RESULTS: puzzles
#+begin_src sh
1785.00 ┤
1770.13 ┤   ╭─╮
1755.27 ┤  ╭╯ │  ╭
1740.40 ┤ ╭╯  ╰╮ │
1725.53 ┤ │    ╰╮│
1710.67 ┤╭╯     ╰╯
1695.80 ┤│
1680.93 ┤│
1666.07 ┤│
1651.20 ┤│
1636.33 ┤│
1621.47 ┤│
1606.60 ┤│
1591.73 ┤│
1576.87 ┤│
1562.00 ┼╯

#+end_src

** Usage
*** Chart
Run this command in your terminal, where =$variant= is a game type or speed (like =rapid= or =chess960=). In Emacs, use =C-c C-c= on a variant's =#+CALL:= block in this file.

#+NAME: chart
#+BEGIN_SRC sh :var variant="rapid" :var user="beardedjohnson" :eval yes :results output code
mix lichess.$variant $user
#+END_SRC
*** Recap
Run this command in your terminal to see a recap of a =$user='s last 100 games. In Emacs, use =C-c C-c= on the =#+CALL: recap= block.

#+NAME: recap
#+BEGIN_SRC sh :var user="beardedjohnson" :eval yes :results output raw :wrap src txt
mix lichess.recap $user
#+END_SRC

** Setup
Run in your terminal or execute this code block in Emacs:

#+NAME: setup
#+BEGIN_SRC sh :eval query :results silent
mix do deps.get, compile
#+END_SRC

A =LICHESS_API_TOKEN= environment variable /must/ be set at compile time.

I suggest using [[https://direnv.net/][direnv]] to set your =LICHESS_API_TOKEN= in this project only. The root =.envrc= file is ignored, so there's no risk of committing your token.
